<!DOCTYPE HTML>
<html lang="fr">
<head>
<!-- Generated by javadoc (21) on Wed Feb 21 11:44:19 CET 2024 -->
<title>MgLocalReconciliationService (ccs-reconciliator-server 0.8.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2024-02-21">
<meta name="description" content="declaration: package: io.clonecloudstore.reconciliator.database.mongodb, class: MgLocalReconciliationService">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/MgLocalReconciliationService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.clonecloudstore.reconciliator.database.mongodb</a></div>
<h1 title="Class MgLocalReconciliationService" class="title">Class MgLocalReconciliationService</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">io.clonecloudstore.reconciliator.database.mongodb.MgLocalReconciliationService</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../model/LocalReconciliationService.html" title="interface in io.clonecloudstore.reconciliator.database.model">LocalReconciliationService</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="annotations">@ApplicationScoped
</span><span class="modifiers">public class </span><span class="element-name type-name-label">MgLocalReconciliationService</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="../model/LocalReconciliationService.html" title="interface in io.clonecloudstore.reconciliator.database.model">LocalReconciliationService</a></span></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#LOCAL_RECONCILIATOR" class="member-name-link">LOCAL_RECONCILIATOR</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-io.clonecloudstore.reconciliator.database.model.LocalReconciliationService">Fields inherited from interface&nbsp;io.clonecloudstore.reconciliator.database.model.<a href="../model/LocalReconciliationService.html" title="interface in io.clonecloudstore.reconciliator.database.model">LocalReconciliationService</a></h3>
<code><a href="../model/LocalReconciliationService.html#DELETED_RANK">DELETED_RANK</a>, <a href="../model/LocalReconciliationService.html#DELETING_RANK">DELETING_RANK</a>, <a href="../model/LocalReconciliationService.html#ERR_DEL_RANK">ERR_DEL_RANK</a>, <a href="../model/LocalReconciliationService.html#ERR_UPL_RANK">ERR_UPL_RANK</a>, <a href="../model/LocalReconciliationService.html#READY_RANK">READY_RANK</a>, <a href="../model/LocalReconciliationService.html#STATUS_NAME_ORDERED">STATUS_NAME_ORDERED</a>, <a href="../model/LocalReconciliationService.html#TO_UPDATE_RANK">TO_UPDATE_RANK</a>, <a href="../model/LocalReconciliationService.html#UNKNOWN_RANK">UNKNOWN_RANK</a>, <a href="../model/LocalReconciliationService.html#UPLOAD_RANK">UPLOAD_RANK</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(io.clonecloudstore.accessor.server.database.mongodb.MgDaoAccessorObjectRepository,io.clonecloudstore.reconciliator.database.mongodb.MgDaoNativeListingRepository,io.clonecloudstore.reconciliator.database.mongodb.MgDaoSitesListingRepository,io.clonecloudstore.reconciliator.database.mongodb.MgDaoRequestRepository,io.clonecloudstore.common.quarkus.metrics.BulkMetrics)" class="member-name-link">MgLocalReconciliationService</a><wbr>(<a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-accessor/ccs-accessor-database/apidocs/io/clonecloudstore/accessor/server/database/mongodb/MgDaoAccessorObjectRepository.html" title="class or interface in io.clonecloudstore.accessor.server.database.mongodb" class="external-link">MgDaoAccessorObjectRepository</a>&nbsp;objectRepository,
 <a href="MgDaoNativeListingRepository.html" title="class in io.clonecloudstore.reconciliator.database.mongodb">MgDaoNativeListingRepository</a>&nbsp;nativeListingRepository,
 <a href="MgDaoSitesListingRepository.html" title="class in io.clonecloudstore.reconciliator.database.mongodb">MgDaoSitesListingRepository</a>&nbsp;sitesListingRepository,
 <a href="MgDaoRequestRepository.html" title="class in io.clonecloudstore.reconciliator.database.mongodb">MgDaoRequestRepository</a>&nbsp;requestRepository,
 <a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-quarkus/apidocs/io/clonecloudstore/common/quarkus/metrics/BulkMetrics.html" title="class or interface in io.clonecloudstore.common.quarkus.metrics" class="external-link">BulkMetrics</a>&nbsp;bulkMetrics)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#cleanNativeListing(io.clonecloudstore.reconciliator.database.model.DaoRequest)" class="member-name-link">cleanNativeListing</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Used only if NativeListing is not to be kept</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#cleanSitesListing(io.clonecloudstore.reconciliator.database.model.DaoRequest)" class="member-name-link">cleanSitesListing</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Used only if SitesListing is not to be kept</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-standard/apidocs/io/clonecloudstore/common/standard/stream/ClosingIterator.html" title="class or interface in io.clonecloudstore.common.standard.stream" class="external-link">ClosingIterator</a><wbr>&lt;<a href="../model/DaoSitesListing.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoSitesListing</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSiteListing(io.clonecloudstore.reconciliator.database.model.DaoRequest)" class="member-name-link">getSiteListing</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the local sites listing to send through network<br>
 Step6: get all local sites listing<br>
 Index Sites: requestId</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#step1CleanUpObjectsNativeListings(io.clonecloudstore.reconciliator.database.model.DaoRequest)" class="member-name-link">step1CleanUpObjectsNativeListings</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoPreviousRequest)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Clean Up Native Listing and Objects from status Object<br>
 Index Objects: Bucket, Site, Status, creation</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#step1SubStep1CleanUpStatusUnknownObjectsNativeListings(io.clonecloudstore.reconciliator.database.model.DaoRequest)" class="member-name-link">step1SubStep1CleanUpStatusUnknownObjectsNativeListings</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoPreviousRequest)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Clean Up Native Listing and Objects from status Object<br>
 Remove UNKNOWN status<br>
 Index Objects: Bucket, Site, Status</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#step1SubStep2CleanUpStatusOlderUploadDeleteCheckObjectsNativeListings(io.clonecloudstore.reconciliator.database.model.DaoRequest)" class="member-name-link">step1SubStep2CleanUpStatusOlderUploadDeleteCheckObjectsNativeListings</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoPreviousRequest)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Clean Up Objects ReconciliationStatus from status Object<br>
 Index Objects: Bucket, Site, Status, creation</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#step1SubStep3CleanUpPreviousErrorUploadAndDeletedNativeListing(io.clonecloudstore.reconciliator.database.model.DaoRequest)" class="member-name-link">step1SubStep3CleanUpPreviousErrorUploadAndDeletedNativeListing</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoPreviousRequest)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Clean Up Native Listing from status Object<br>
 Remove UNKNOWN, UPLOAD, ERR_UPL, DELETED, ERR_DEL items<br>
 Index Objects: Bucket, Site, Status</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#step2ContinueFromPreviousRequest(java.lang.String,io.clonecloudstore.reconciliator.database.model.DaoRequest,boolean)" class="member-name-link">step2ContinueFromPreviousRequest</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;requestId,
 <a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest,
 boolean&nbsp;replaceOldRequest)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get Old listing to restart from (for each site): Optional step (if accepting eventual mistakes on old data)<br>
 Index Native: requestId, bucket<br>
 Step2: Copy NativeListing with new RequestId (or Replace requestId)</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#step3SaveNativeListingDb(io.clonecloudstore.reconciliator.database.model.DaoRequest)" class="member-name-link">step3SaveNativeListingDb</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Listing according to filter such as now &gt; dateFrom (DB), updating existing info<br>
 Step3: From Db Objects into NativeListing local step<br>
 Index Objects: site, bucket, event<br>
 Index Native: requestId, bucket, name</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#step4SaveNativeListingDriver(io.clonecloudstore.reconciliator.database.model.DaoRequest)" class="member-name-link">step4SaveNativeListingDriver</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Listing according to filter such as now &gt; dateFrom (DRIVER), updating existing info
 Step4: From Driver to Native<br>
 Index Native: requestId, bucket, name</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#step51InsertMissingObjectsFromExistingDriverIntoObjects(io.clonecloudstore.reconciliator.database.model.DaoRequest,java.util.concurrent.atomic.AtomicReference)" class="member-name-link">step51InsertMissingObjectsFromExistingDriverIntoObjects</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicReference</a>&lt;<a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a>&gt;&nbsp;exceptionAtomicReference)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#step52UpsertMissingObjectsFromExistingDriverIntoSiteListing(io.clonecloudstore.reconciliator.database.model.DaoRequest,java.util.concurrent.atomic.AtomicReference,java.util.concurrent.BlockingQueue)" class="member-name-link">step52UpsertMissingObjectsFromExistingDriverIntoSiteListing</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicReference</a>&lt;<a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a>&gt;&nbsp;exceptionAtomicReference,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/BlockingQueue.html" title="class or interface in java.util.concurrent" class="external-link">BlockingQueue</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../model/DaoSitesListing.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoSitesListing</a>&gt;&gt;&nbsp;blockingQueue)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#step53UpdateWhereNoDriverIntoObjects(io.clonecloudstore.reconciliator.database.model.DaoRequest,java.util.concurrent.atomic.AtomicReference)" class="member-name-link">step53UpdateWhereNoDriverIntoObjects</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicReference</a>&lt;<a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a>&gt;&nbsp;exceptionAtomicReference)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#step54UpsertWhereNoDriverIntoSiteListing(io.clonecloudstore.reconciliator.database.model.DaoRequest,java.util.concurrent.atomic.AtomicReference)" class="member-name-link">step54UpsertWhereNoDriverIntoSiteListing</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicReference</a>&lt;<a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a>&gt;&nbsp;exceptionAtomicReference)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#step55UpdateBothDbDriverIntoObjects(io.clonecloudstore.reconciliator.database.model.DaoRequest,java.util.concurrent.atomic.AtomicReference)" class="member-name-link">step55UpdateBothDbDriverIntoObjects</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicReference</a>&lt;<a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a>&gt;&nbsp;exceptionAtomicReference)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#step56UpdateBothDbDriverIntoSiteListing(io.clonecloudstore.reconciliator.database.model.DaoRequest,java.util.concurrent.atomic.AtomicReference,java.util.concurrent.BlockingQueue)" class="member-name-link">step56UpdateBothDbDriverIntoSiteListing</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicReference</a>&lt;<a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a>&gt;&nbsp;exceptionAtomicReference,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/BlockingQueue.html" title="class or interface in java.util.concurrent" class="external-link">BlockingQueue</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../model/DaoSitesListing.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoSitesListing</a>&gt;&gt;&nbsp;blockingQueue)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#step58CountFinalSiteListing(io.clonecloudstore.reconciliator.database.model.DaoRequest)" class="member-name-link">step58CountFinalSiteListing</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#step5CompareNativeListingDbDriver(io.clonecloudstore.reconciliator.database.model.DaoRequest)" class="member-name-link">step5CompareNativeListingDbDriver</a><wbr>(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Compare Native listing with DB and DRIVER (both or only one)<br>
 Step5: Complete DB without Driver from NativeListing into SitesListing Local step<br>
 Index Native: requestId, bucket, db, driver.event (optional)<br>
 Index Objects: site, bucket, name<br>
 Index Native: requestId, bucket, db.site, driver (optional)<br>
 Index Native: requestId, bucket, db.site, driver.site<br>
 Index Sites: requestId, bucket, name</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="LOCAL_RECONCILIATOR">
<h3>LOCAL_RECONCILIATOR</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">LOCAL_RECONCILIATOR</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../../constant-values.html#io.clonecloudstore.reconciliator.database.mongodb.MgLocalReconciliationService.LOCAL_RECONCILIATOR">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(io.clonecloudstore.accessor.server.database.mongodb.MgDaoAccessorObjectRepository,io.clonecloudstore.reconciliator.database.mongodb.MgDaoNativeListingRepository,io.clonecloudstore.reconciliator.database.mongodb.MgDaoSitesListingRepository,io.clonecloudstore.reconciliator.database.mongodb.MgDaoRequestRepository,io.clonecloudstore.common.quarkus.metrics.BulkMetrics)">
<h3>MgLocalReconciliationService</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">MgLocalReconciliationService</span><wbr><span class="parameters">(<a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-accessor/ccs-accessor-database/apidocs/io/clonecloudstore/accessor/server/database/mongodb/MgDaoAccessorObjectRepository.html" title="class or interface in io.clonecloudstore.accessor.server.database.mongodb" class="external-link">MgDaoAccessorObjectRepository</a>&nbsp;objectRepository,
 <a href="MgDaoNativeListingRepository.html" title="class in io.clonecloudstore.reconciliator.database.mongodb">MgDaoNativeListingRepository</a>&nbsp;nativeListingRepository,
 <a href="MgDaoSitesListingRepository.html" title="class in io.clonecloudstore.reconciliator.database.mongodb">MgDaoSitesListingRepository</a>&nbsp;sitesListingRepository,
 <a href="MgDaoRequestRepository.html" title="class in io.clonecloudstore.reconciliator.database.mongodb">MgDaoRequestRepository</a>&nbsp;requestRepository,
 <a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-quarkus/apidocs/io/clonecloudstore/common/quarkus/metrics/BulkMetrics.html" title="class or interface in io.clonecloudstore.common.quarkus.metrics" class="external-link">BulkMetrics</a>&nbsp;bulkMetrics)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="step1CleanUpObjectsNativeListings(io.clonecloudstore.reconciliator.database.model.DaoRequest)">
<h3>step1CleanUpObjectsNativeListings</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">step1CleanUpObjectsNativeListings</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoPreviousRequest)</span>
                                       throws <span class="exceptions"><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></span></div>
<div class="block">Clean Up Native Listing and Objects from status Object<br>
 Index Objects: Bucket, Site, Status, creation</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../model/LocalReconciliationService.html#step1CleanUpObjectsNativeListings(io.clonecloudstore.reconciliator.database.model.DaoRequest)">step1CleanUpObjectsNativeListings</a></code>&nbsp;in interface&nbsp;<code><a href="../model/LocalReconciliationService.html" title="interface in io.clonecloudstore.reconciliator.database.model">LocalReconciliationService</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="step1SubStep1CleanUpStatusUnknownObjectsNativeListings(io.clonecloudstore.reconciliator.database.model.DaoRequest)">
<h3>step1SubStep1CleanUpStatusUnknownObjectsNativeListings</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">step1SubStep1CleanUpStatusUnknownObjectsNativeListings</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoPreviousRequest)</span>
                                                            throws <span class="exceptions"><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></span></div>
<div class="block">Clean Up Native Listing and Objects from status Object<br>
 Remove UNKNOWN status<br>
 Index Objects: Bucket, Site, Status</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="step1SubStep2CleanUpStatusOlderUploadDeleteCheckObjectsNativeListings(io.clonecloudstore.reconciliator.database.model.DaoRequest)">
<h3>step1SubStep2CleanUpStatusOlderUploadDeleteCheckObjectsNativeListings</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">step1SubStep2CleanUpStatusOlderUploadDeleteCheckObjectsNativeListings</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoPreviousRequest)</span>
                                                                           throws <span class="exceptions"><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></span></div>
<div class="block">Clean Up Objects ReconciliationStatus from status Object<br>
 Index Objects: Bucket, Site, Status, creation</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="step1SubStep3CleanUpPreviousErrorUploadAndDeletedNativeListing(io.clonecloudstore.reconciliator.database.model.DaoRequest)">
<h3>step1SubStep3CleanUpPreviousErrorUploadAndDeletedNativeListing</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">step1SubStep3CleanUpPreviousErrorUploadAndDeletedNativeListing</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoPreviousRequest)</span>
                                                                    throws <span class="exceptions"><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></span></div>
<div class="block">Clean Up Native Listing from status Object<br>
 Remove UNKNOWN, UPLOAD, ERR_UPL, DELETED, ERR_DEL items<br>
 Index Objects: Bucket, Site, Status</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="step2ContinueFromPreviousRequest(java.lang.String,io.clonecloudstore.reconciliator.database.model.DaoRequest,boolean)">
<h3>step2ContinueFromPreviousRequest</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">step2ContinueFromPreviousRequest</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;requestId,
 <a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest,
 boolean&nbsp;replaceOldRequest)</span>
                                      throws <span class="exceptions"><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></span></div>
<div class="block">Get Old listing to restart from (for each site): Optional step (if accepting eventual mistakes on old data)<br>
 Index Native: requestId, bucket<br>
 Step2: Copy NativeListing with new RequestId (or Replace requestId)</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../model/LocalReconciliationService.html#step2ContinueFromPreviousRequest(java.lang.String,io.clonecloudstore.reconciliator.database.model.DaoRequest,boolean)">step2ContinueFromPreviousRequest</a></code>&nbsp;in interface&nbsp;<code><a href="../model/LocalReconciliationService.html" title="interface in io.clonecloudstore.reconciliator.database.model">LocalReconciliationService</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="step3SaveNativeListingDb(io.clonecloudstore.reconciliator.database.model.DaoRequest)">
<h3>step3SaveNativeListingDb</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">step3SaveNativeListingDb</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest)</span>
                              throws <span class="exceptions"><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></span></div>
<div class="block">Listing according to filter such as now &gt; dateFrom (DB), updating existing info<br>
 Step3: From Db Objects into NativeListing local step<br>
 Index Objects: site, bucket, event<br>
 Index Native: requestId, bucket, name</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../model/LocalReconciliationService.html#step3SaveNativeListingDb(io.clonecloudstore.reconciliator.database.model.DaoRequest)">step3SaveNativeListingDb</a></code>&nbsp;in interface&nbsp;<code><a href="../model/LocalReconciliationService.html" title="interface in io.clonecloudstore.reconciliator.database.model">LocalReconciliationService</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="step4SaveNativeListingDriver(io.clonecloudstore.reconciliator.database.model.DaoRequest)">
<h3>step4SaveNativeListingDriver</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">step4SaveNativeListingDriver</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest)</span>
                                  throws <span class="exceptions"><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></span></div>
<div class="block">Listing according to filter such as now &gt; dateFrom (DRIVER), updating existing info
 Step4: From Driver to Native<br>
 Index Native: requestId, bucket, name</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../model/LocalReconciliationService.html#step4SaveNativeListingDriver(io.clonecloudstore.reconciliator.database.model.DaoRequest)">step4SaveNativeListingDriver</a></code>&nbsp;in interface&nbsp;<code><a href="../model/LocalReconciliationService.html" title="interface in io.clonecloudstore.reconciliator.database.model">LocalReconciliationService</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="step5CompareNativeListingDbDriver(io.clonecloudstore.reconciliator.database.model.DaoRequest)">
<h3>step5CompareNativeListingDbDriver</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">step5CompareNativeListingDbDriver</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest)</span>
                                       throws <span class="exceptions"><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></span></div>
<div class="block">Compare Native listing with DB and DRIVER (both or only one)<br>
 Step5: Complete DB without Driver from NativeListing into SitesListing Local step<br>
 Index Native: requestId, bucket, db, driver.event (optional)<br>
 Index Objects: site, bucket, name<br>
 Index Native: requestId, bucket, db.site, driver (optional)<br>
 Index Native: requestId, bucket, db.site, driver.site<br>
 Index Sites: requestId, bucket, name</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../model/LocalReconciliationService.html#step5CompareNativeListingDbDriver(io.clonecloudstore.reconciliator.database.model.DaoRequest)">step5CompareNativeListingDbDriver</a></code>&nbsp;in interface&nbsp;<code><a href="../model/LocalReconciliationService.html" title="interface in io.clonecloudstore.reconciliator.database.model">LocalReconciliationService</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="step51InsertMissingObjectsFromExistingDriverIntoObjects(io.clonecloudstore.reconciliator.database.model.DaoRequest,java.util.concurrent.atomic.AtomicReference)">
<h3>step51InsertMissingObjectsFromExistingDriverIntoObjects</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">step51InsertMissingObjectsFromExistingDriverIntoObjects</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicReference</a>&lt;<a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a>&gt;&nbsp;exceptionAtomicReference)</span></div>
</section>
</li>
<li>
<section class="detail" id="step52UpsertMissingObjectsFromExistingDriverIntoSiteListing(io.clonecloudstore.reconciliator.database.model.DaoRequest,java.util.concurrent.atomic.AtomicReference,java.util.concurrent.BlockingQueue)">
<h3>step52UpsertMissingObjectsFromExistingDriverIntoSiteListing</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">step52UpsertMissingObjectsFromExistingDriverIntoSiteListing</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicReference</a>&lt;<a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a>&gt;&nbsp;exceptionAtomicReference,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/BlockingQueue.html" title="class or interface in java.util.concurrent" class="external-link">BlockingQueue</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../model/DaoSitesListing.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoSitesListing</a>&gt;&gt;&nbsp;blockingQueue)</span></div>
</section>
</li>
<li>
<section class="detail" id="step53UpdateWhereNoDriverIntoObjects(io.clonecloudstore.reconciliator.database.model.DaoRequest,java.util.concurrent.atomic.AtomicReference)">
<h3>step53UpdateWhereNoDriverIntoObjects</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">step53UpdateWhereNoDriverIntoObjects</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicReference</a>&lt;<a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a>&gt;&nbsp;exceptionAtomicReference)</span></div>
</section>
</li>
<li>
<section class="detail" id="step54UpsertWhereNoDriverIntoSiteListing(io.clonecloudstore.reconciliator.database.model.DaoRequest,java.util.concurrent.atomic.AtomicReference)">
<h3>step54UpsertWhereNoDriverIntoSiteListing</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">step54UpsertWhereNoDriverIntoSiteListing</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicReference</a>&lt;<a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a>&gt;&nbsp;exceptionAtomicReference)</span></div>
</section>
</li>
<li>
<section class="detail" id="step55UpdateBothDbDriverIntoObjects(io.clonecloudstore.reconciliator.database.model.DaoRequest,java.util.concurrent.atomic.AtomicReference)">
<h3>step55UpdateBothDbDriverIntoObjects</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">step55UpdateBothDbDriverIntoObjects</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicReference</a>&lt;<a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a>&gt;&nbsp;exceptionAtomicReference)</span></div>
</section>
</li>
<li>
<section class="detail" id="step56UpdateBothDbDriverIntoSiteListing(io.clonecloudstore.reconciliator.database.model.DaoRequest,java.util.concurrent.atomic.AtomicReference,java.util.concurrent.BlockingQueue)">
<h3>step56UpdateBothDbDriverIntoSiteListing</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">step56UpdateBothDbDriverIntoSiteListing</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html" title="class or interface in java.util.concurrent.atomic" class="external-link">AtomicReference</a>&lt;<a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a>&gt;&nbsp;exceptionAtomicReference,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/BlockingQueue.html" title="class or interface in java.util.concurrent" class="external-link">BlockingQueue</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="../model/DaoSitesListing.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoSitesListing</a>&gt;&gt;&nbsp;blockingQueue)</span></div>
</section>
</li>
<li>
<section class="detail" id="step58CountFinalSiteListing(io.clonecloudstore.reconciliator.database.model.DaoRequest)">
<h3>step58CountFinalSiteListing</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">step58CountFinalSiteListing</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest)</span>
                                 throws <span class="exceptions"><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cleanNativeListing(io.clonecloudstore.reconciliator.database.model.DaoRequest)">
<h3>cleanNativeListing</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">cleanNativeListing</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest)</span>
                        throws <span class="exceptions"><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></span></div>
<div class="block">Used only if NativeListing is not to be kept</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../model/LocalReconciliationService.html#cleanNativeListing(io.clonecloudstore.reconciliator.database.model.DaoRequest)">cleanNativeListing</a></code>&nbsp;in interface&nbsp;<code><a href="../model/LocalReconciliationService.html" title="interface in io.clonecloudstore.reconciliator.database.model">LocalReconciliationService</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getSiteListing(io.clonecloudstore.reconciliator.database.model.DaoRequest)">
<h3>getSiteListing</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-standard/apidocs/io/clonecloudstore/common/standard/stream/ClosingIterator.html" title="class or interface in io.clonecloudstore.common.standard.stream" class="external-link">ClosingIterator</a>&lt;<a href="../model/DaoSitesListing.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoSitesListing</a>&gt;</span>&nbsp;<span class="element-name">getSiteListing</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest)</span>
                                                throws <span class="exceptions"><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></span></div>
<div class="block">Get the local sites listing to send through network<br>
 Step6: get all local sites listing<br>
 Index Sites: requestId</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../model/LocalReconciliationService.html#getSiteListing(io.clonecloudstore.reconciliator.database.model.DaoRequest)">getSiteListing</a></code>&nbsp;in interface&nbsp;<code><a href="../model/LocalReconciliationService.html" title="interface in io.clonecloudstore.reconciliator.database.model">LocalReconciliationService</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="cleanSitesListing(io.clonecloudstore.reconciliator.database.model.DaoRequest)">
<h3>cleanSitesListing</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">cleanSitesListing</span><wbr><span class="parameters">(<a href="../model/DaoRequest.html" title="class in io.clonecloudstore.reconciliator.database.model">DaoRequest</a>&nbsp;daoRequest)</span>
                       throws <span class="exceptions"><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></span></div>
<div class="block">Used only if SitesListing is not to be kept</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../model/LocalReconciliationService.html#cleanSitesListing(io.clonecloudstore.reconciliator.database.model.DaoRequest)">cleanSitesListing</a></code>&nbsp;in interface&nbsp;<code><a href="../model/LocalReconciliationService.html" title="interface in io.clonecloudstore.reconciliator.database.model">LocalReconciliationService</a></code></dd>
<dt>Throws:</dt>
<dd><code><a href="https://fredericBregier.github.io/clone-cloud-store/site/ccs-common/ccs-common-database/apidocs/io/clonecloudstore/common/database/utils/exception/CcsDbException.html" title="class or interface in io.clonecloudstore.common.database.utils.exception" class="external-link">CcsDbException</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2024. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
